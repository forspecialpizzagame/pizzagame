(()=>{"use strict";var t={706:t=>{t.exports=JSON.parse('{"diamond":{"name":{"english":"Diamond","russia":"Алмаз","spain":"Diamante"},"description":{"english":"Not a single tooth will bite through this pizza.","russia":"Ни один зуб не прокусит эту пиццу.","spain":"Ningun diente mordera esta pizza."},"cost":"not sold"},"ruby":{"name":{"english":"Ruby","russia":"Рубин","spain":"Rubi"},"description":{"english":"Is this pizza definitely not fake?","russia":"Эта пицца точно не подделка?","spain":"Esta pizza no es falsa?"},"cost":"not sold"},"emerald":{"name":{"english":"Emerald","russia":"Изумруд","spain":"Esmeralda"},"description":{"english":"Hmm hmm... Hmm.","russia":"Хмм хм... Хммм.","spain":"Hmm hmm... Hmmm."},"cost":"not sold"},"amethyst":{"name":{"english":"Amethyst","russia":"Аметист","spain":"Amatista"},"description":{"english":"Gutter...","russia":"Желоба...","spain":"Canal..."},"cost":"not sold"},"jade":{"name":{"english":"Jade","russia":"Нефрит","spain":"Jade"},"description":{"english":"Straight from the Chinese palaces.","russia":"Прямиком из китайских дворцов.","spain":"Directamente de los palacios chinos."},"cost":"not sold"},"topaz":{"name":{"english":"Topaz","russia":"Топаз","spain":"Topacio"},"description":{"english":"No! It\\\\\'s not caramel.","russia":"Нет! Это не карамель.","spain":"No! No es caramelo."},"cost":"not sold"},"amber":{"name":{"english":"Amber","russia":"Янтарь","spain":"Ambar"},"description":{"english":"It was once the resin of a tree.","russia":"Когда-то она была смолой дерева.","spain":"Una vez fue resina de madera."},"cost":"not sold"}}')},331:t=>{t.exports=JSON.parse('{"root":"/public/assets/images/game","extension":"png","list":{"background":"backgrounds/background","background-2":"backgrounds/background-2","background-3":"backgrounds/halloween-background","leaderboard-background":"backgrounds/leaderboard-background","giant-pizza":"giant-pizza","leaderboard-button":"gui/buttons/leaderboard-button","settings-button":"gui/buttons/settings-button","shop-button":"gui/buttons/shop-button","home-button":"gui/buttons/home-button","pause-button":"gui/buttons/pause-button","continue-button":"gui/buttons/continue-button","language-button":"gui/buttons/language-button","exit-button":"gui/buttons/exit-button","fullscreen-on-button":"gui/buttons/fullscreen-on-button","fullscreen-off-button":"gui/buttons/fullscreen-off-button","telegram-button":"gui/buttons/telegram-button","youtube-button":"gui/buttons/youtube-button","about-button":"gui/buttons/about-button","github-button":"gui/buttons/github-button","left-button":"gui/buttons/left-button","right-button":"gui/buttons/right-button","checkbox-button":"gui/buttons/checkbox-button","checkbox-fill-button":"gui/buttons/checkbox-fill-button","back-icon":"gui/icons/back-icon","crystal-room-icon":"gui/icons/crystal-room-icon","home-icon":"gui/icons/home-icon","shop-icon":"gui/icons/shop-icon","language-icon":"gui/icons/language-icon","casino-icon":"gui/icons/casino-icon","english-flag":"gui/flags/english-flag","russia-flag":"gui/flags/russia-flag","spain-flag":"gui/flags/spain-flag","heart":"hud/hearts/heart","gold-heart":"hud/hearts/gold-heart","dead-heart":"hud/hearts/dead-heart","ice-icon":"hud/icons/ice-icon","x-icon":"hud/icons/x-icon","trophy":"hud/trophy","money":"hud/money","lock-pizza":"hud/lock-pizza","icon-line":"hud/icon-line","box":"player/box","ice-box":"player/ice-box","rotten-box":"player/rotten-box","spice-box":"player/spice-box","cola":"loot/cola","rotten-pizza":"loot/rotten-pizza","ice":"loot/ice","x":"loot/x","totem":"loot/totem","money-bag":"loot/money-bag","big-money":"loot/big-money","pepperoni-pizza":"loot/pizzas/pepperoni-pizza","farmhouse-pizza":"loot/pizzas/farmhouse-pizza","margaret-pizza":"loot/pizzas/margaret-pizza","cheese-pizza":"loot/pizzas/cheese-pizza","spice-pizza":"loot/pizzas/spice-pizza","tuscany-pizza":"loot/pizzas/tuscany-pizza","carbonara-pizza":"loot/pizzas/carbonara-pizza","belarusian-pizza":"loot/pizzas/belarusian-pizza","hawaiian-pizza":"loot/pizzas/hawaiian-pizza","mexican-pizza":"loot/pizzas/mexican-pizza","pumpkin-pizza":"loot/pizzas/pumpkin-pizza","italian-pizza":"loot/pizzas/italian-pizza","gold-pizza":"loot/pizzas/gold-pizza","bavarian-pizza":"loot/pizzas/bavarian-pizza","chicken-pizza":"loot/pizzas/chicken-pizza","casino-pizza":"loot/pizzas/casino-pizza","old-carbonara-pizza":"loot/pizzas/old-carbonara-pizza","diamond-pizza":"loot/crystal-pizzas/diamond-pizza","ruby-pizza":"loot/crystal-pizzas/ruby-pizza","emerald-pizza":"loot/crystal-pizzas/emerald-pizza","amethyst-pizza":"loot/crystal-pizzas/amethyst-pizza","jade-pizza":"loot/crystal-pizzas/jade-pizza","topaz-pizza":"loot/crystal-pizzas/topaz-pizza","amber-pizza":"loot/crystal-pizzas/amber-pizza","smell-animation":"animations/smell-animation","spice-animation":"animations/spice-animation","big-money-animation":"animations/big-money-animation","octo":"octo"}}')},113:t=>{t.exports=JSON.parse('{"click":{"english":"Click!","russia":"Кликни!","spain":"Haz clic!"},"loading resources":{"english":"Loading resources...","russia":"Загрузка ресурсов...","spain":"Carga de recursos..."},"loading data":{"english":"Loading data...","russia":"Загрузка данных...","spain":"Carga de datos..."},"data load error":{"english":"Data load error","russia":"Ошибка загрузки данных","spain":"Error de carga de datos"},"developer":{"english":"Developer","russia":"Разработчик","spain":"Elaborador"},"testers":{"english":"Testers","russia":"Тестеры","spain":"Probadores"}}')},293:t=>{t.exports=JSON.parse('{"pepperoni":{"name":{"english":"Pepperoni","russia":"Пепперони","spain":"Pepperoni"},"description":{"english":"Classic. Everyone knows her.","russia":"Классика. Каждый знает её.","spain":"Obras clasicas. Todos la conocen."},"cost":"not sold"},"farmhouse":{"name":{"english":"Farmhouse","russia":"Фермерская","spain":"De granjero"},"description":{"english":"Pizza for getting a taste of village life.","russia":"Пицца для получения вкуса деревенской жизни.","spain":"Pizza para obtenerun sabor de la vida del pueblo."},"cost":50},"margaret":{"name":{"english":"Margaret","russia":"Маргарита","spain":"Margarita"},"description":{"english":"Who doesn\'t know this pizza?","russia":"Кто не знает эту пиццу?","spain":"Quien no conoce esta pizza?"},"cost":150},"cheese":{"name":{"english":"Cheese","russia":"Сырная","spain":"De queso"},"description":{"english":"Cheese lovers will like this pizza.","russia":"Любителям сыра придется по вкусу эта пицца.","spain":"Los amantes del queso tendran que probar esta pizza."},"cost":300},"spice":{"name":{"english":"Spice","russia":"Спайси","spain":"Spicey"},"description":{"english":"Ahhh! Hot! Hot jalapeno pepper will surprise you.","russia":"Аааа! Горячо! Острый перец халапеньо удивит тебя.","spain":"Ahh! Caliente! Los jalapenos picantes te sorprenderan."},"cost":2000},"tuscany":{"name":{"english":"Tuscany","russia":"Тоскана","spain":"Toscana"},"description":{"english":"A taste from Florence. It will cover the Renaissance.","russia":"Вкус из Флоренции. Она накроет эпохой возрождения.","spain":"Sabor de Florencia. Cubrira el renacimiento."},"cost":700},"carbonara":{"name":{"english":"Carbonara","russia":"Карбонара","spain":"Carbonara"},"description":{"english":"Standard ingredients - delicious pizza.","russia":"Стандартные ингредиенты - вкусная пицца.","spain":"Los ingredientes estandar son deliciosas pizzas."},"cost":300},"belarusian":{"name":{"english":"Belarusian","russia":"Белорусская","spain":"Bielorrusa"},"description":{"english":"The main ingredient of this pizza is potatoes.","russia":"Главным ингредиентом этой пиццы является картофель.","spain":"El ingrediente principal de esta pizza es la Papa."},"cost":800},"hawaiian":{"name":{"english":"hawaiian","russia":"Гавайская","spain":"Hawaiana"},"description":{"english":"There are pineapples there, it\'s terrible!","russia":"Там есть ананасы, ужасно!","spain":"Hay pinas, horrible!"},"cost":300},"mexican":{"name":{"english":"Mexican","russia":"Мексиканская","spain":"Mexicana"},"description":{"english":"Spicey has a worthy rival.","russia":"У Спайси появился достойный соперник.","spain":"Spicey tiene un rival digno."},"cost":1200},"pumpkin":{"name":{"english":"Pumpkin","russia":"Тыквенная","spain":"De calabaza"},"description":{"english":"Yes! It\'s not pizza, but it\'s definitely not worse.","russia":"Да! Это не пицца, но точно не хуже.","spain":"SI! No es pizza, pero definitivamente no es peor."},"cost":600},"italian":{"name":{"english":"Italian","russia":"Итальянская","spain":"Italiana"},"description":{"english":"Real, Neapolitan pizza.","russia":"Настоящая, Неаполитанская пицца.","spain":"Autentica pizza Napolitana."},"cost":1500},"gold":{"name":{"english":"Golden","russia":"Золотая","spain":"De oro"},"description":{"english":"Well, very expensive.","russia":"До-дорого пиздец.","spain":"Bueno, muy caro."},"cost":3000},"bavarian":{"name":{"english":"Bavarian","russia":"Баварская","spain":"Bavaro"},"description":{"english":"ZHVP didn\'t come up with a description.","russia":"ЖВП не придумал описание.","spain":"ZHVP no se le ocurrio una descripcion."},"cost":1500},"chicken":{"name":{"english":"Chicken Ranch","russia":"Чикен ранч","spain":"Chicken Ranch"},"description":{"english":"6 pizzas and cola.","russia":"6 пицц и кола.","spain":"6 pizzas y cola."},"cost":700}}')}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}(()=>{var t,e=function(){function t(t,e){var n=this;this.width=t,this.height=e,this.canvas=null,this.context=null,this.imageList={},this.isImageListLoaded=!1,this.isPlayerDataLoaded=!1,this.fontName="old-pixel",this.canvas=document.createElement("canvas"),this.canvas.width=document.querySelector("#app").clientWidth,this.canvas.height=document.querySelector("#app").clientHeight,this.canvas.style.backgroundColor="silver",document.querySelector("#app").appendChild(this.canvas),window.addEventListener("resize",(function(t){return n.updateCanvas()})),this.context=this.canvas.getContext("2d"),this.updateCanvas()}return Object.defineProperty(t.prototype,"getWidth",{get:function(){return this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getHeight",{get:function(){return this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getIsImageListLoaded",{get:function(){return this.isImageListLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getIsDataPlayerLoaded",{get:function(){return this.isPlayerDataLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setImageList",{set:function(t){this.imageList=Object.assign({},this.imageList,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setIsImageListLoaded",{set:function(t){this.isImageListLoaded=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setIsPlayerDataLoaded",{set:function(t){this.isPlayerDataLoaded=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setColor",{set:function(t){this.context.fillStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setAlpha",{set:function(t){this.context.globalAlpha=t},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.context.restore(),this.context.save(),this.context.scale(this.canvas.width/this.width,this.canvas.height/this.height),this.context.clearRect(0,0,this.width,this.height)},t.prototype.fill=function(t,e,n,i){this.context.fillRect(t,e,n,i)},t.prototype.print=function(t,e,n,i,o){void 0===o&&(o="left"),this.context.textAlign=o,this.context.font="".concat(i,"px ").concat(this.fontName),this.context.fillText(t,e,n)},t.prototype.drawImage=function(t,e,n,i,o){try{this.context.drawImage(this.imageList[t],e,n,i,o)}catch(t){this.drawDebugTexture(e,n,i,o)}},t.prototype.drawSprite=function(t,e,n,i,o,r,s,a,u){try{this.context.drawImage(this.imageList[t],e,n,i,o,r,s,a,u)}catch(t){this.drawDebugTexture(r,s,a,u)}},t.prototype.getTextWidth=function(t,e){return this.context.font="".concat(e,"px ").concat(this.fontName),Math.round(this.context.measureText(t).width)},t.prototype.getShortScore=function(t){return t>=1e3?"".concat(Math.trunc(t/1e3),".").concat(t.toString()[t.toString().length-3],"k"):t.toString()},t.prototype.updateCanvas=function(){this.canvas.width=document.querySelector("#app").clientWidth>=512?512:document.querySelector("#app").clientWidth,this.canvas.height=document.querySelector("#app").clientHeight,this.context.textBaseline="top",this.context.textAlign="left",this.context.font="16px ".concat(this.fontName),this.context.imageSmoothingEnabled=!1},t.prototype.drawDebugTexture=function(t,e,n,i){this.context.fillStyle="black",this.context.fillRect(t,e,n/2,i/2),this.context.fillRect(t+n/2,e+i/2,n/2,i/2),this.context.fillStyle="magenta",this.context.fillRect(t+n/2,e,n/2,i/2),this.context.fillRect(t,e+i/2,n/2,i/2)},t}(),i=function(){function t(t,e){var n=this;this.width=t,this.height=e,this.keyList={},this.mouse={x:0,y:0,isDown:!1,isUp:!1,isPress:!1},this.touch={x:0,y:0,isPress:!1},this.scaleX=1,this.scaleY=1,this.offsetX=0,this.updateScale(),window.addEventListener("resize",(function(t){return n.updateScale()})),window.addEventListener("keydown",(function(t){return n.keyList[t.key.toLowerCase()]=!0})),window.addEventListener("keyup",(function(t){return n.keyList[t.key.toLowerCase()]=!1})),window.addEventListener("contextmenu",(function(t){return t.preventDefault()})),window.addEventListener("mousedown",(function(t){return n.mouseHandler(t)})),window.addEventListener("mouseup",(function(t){return n.mouseHandler(t)})),window.addEventListener("mousemove",(function(t){return n.mouseHandler(t)})),window.addEventListener("touchstart",(function(t){return n.touchHandler(t)})),window.addEventListener("touchend",(function(t){return n.touchHandler(t)})),window.addEventListener("touchmove",(function(t){return n.touchHandler(t)}))}return Object.defineProperty(t.prototype,"getMouseX",{get:function(){return this.mouse.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getMouseY",{get:function(){return this.mouse.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getMouseIsDown",{get:function(){return this.mouse.isDown},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getMouseIsUp",{get:function(){return this.mouse.isUp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getMouseIsPress",{get:function(){return this.mouse.isPress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getWidth",{get:function(){return this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getHeight",{get:function(){return this.height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.mouse.isDown=!1,this.mouse.isUp=!1},t.prototype.keyPressHandler=function(t){return"space"==t.toLowerCase()?this.keyList[" "]:this.keyList[t.toLowerCase()]},t.prototype.mouseHoverHandler=function(t,e,n,i){return this.mouse.x>=t*this.scaleX+this.offsetX&&this.mouse.x<=t*this.scaleX+n*this.scaleX+this.offsetX&&this.mouse.y>=e*this.scaleY&&this.mouse.y<=e*this.scaleY+i*this.scaleY},t.prototype.mouseDownHandler=function(t,e,n,i){return!!this.mouse.isDown&&this.mouseHoverHandler(t,e,n,i)},t.prototype.mouseUpHandler=function(t,e,n,i){return!!this.mouse.isUp&&this.mouseHoverHandler(t,e,n,i)},t.prototype.mousePressHandler=function(t,e,n,i){return!!this.mouse.isPress&&this.mouseHoverHandler(t,e,n,i)},t.prototype.touchPressHandler=function(t,e,n,i){return!!this.touch.isPress&&this.touch.x>=t*this.scaleX+this.offsetX&&this.touch.x<=t*this.scaleX+n*this.scaleX+this.offsetX&&this.touch.y>=e*this.scaleY&&this.touch.y<=e*this.scaleY+i*this.scaleY},t.prototype.updateScale=function(){this.scaleX=(document.querySelector("#app").clientWidth>=512?512:document.querySelector("#app").clientWidth)/this.width,this.scaleY=document.querySelector("#app").clientHeight/this.height,this.offsetX=document.querySelector("#app > canvas").getBoundingClientRect().left},t.prototype.mouseHandler=function(t){this.mouse.x=t.pageX,this.mouse.y=t.pageY,"mousedown"==t.type?(this.mouse.isDown=!0,this.mouse.isUp=!1,this.mouse.isPress=!0):"mouseup"==t.type&&(this.mouse.isDown=!1,this.mouse.isUp=!0,this.mouse.isPress=!1)},t.prototype.touchHandler=function(t){"touchend"!=t.type&&(this.touch.x=t.targetTouches[t.targetTouches.length-1].pageX,this.touch.y=t.targetTouches[t.targetTouches.length-1].pageY),"touchstart"==t.type?this.touch.isPress=!0:"touchend"==t.type&&0==t.targetTouches.length&&(this.touch.isPress=!1)},t}(),o=function(){function t(t,e,n){this.updateTime=t,this.isLoop=e,this.callback=n,this.isWorking=!1,this.lastTime=0,this.deltaTime=0}return Object.defineProperty(t.prototype,"getIsWorking",{get:function(){return this.isWorking},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getUpdateTime",{get:function(){return this.updateTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getDeltaTime",{get:function(){return this.deltaTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setUpdateTime",{set:function(t){this.updateTime=t},enumerable:!1,configurable:!0}),t.prototype.run=function(){this.isWorking=!0,this.lastTime=0,this.deltaTime=0},t.prototype.stop=function(){this.isWorking=!1},t.prototype.update=function(t){this.isWorking&&(0==this.lastTime&&(this.lastTime=t),this.deltaTime=t-this.lastTime,this.deltaTime>=this.updateTime&&(this.callback(),this.isLoop?this.lastTime=0:this.stop()))},t}(),r=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),s=function(){function t(t){var e=this;this.isWorking=!1,this.nextSceneName="",this.endTimer=new o(0,!1,(function(){return e.isWorking=!1})),this.screen=t.getScreen,this.listener=t.getListener,this.widgetContext=t.getWidgetContext,this.language=t.getLanguage,this.storage=t.getStorage,this.config=t.getConfig}return Object.defineProperty(t.prototype,"getIsWorking",{get:function(){return this.isWorking},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getNextSceneName",{get:function(){return this.nextSceneName},enumerable:!1,configurable:!0}),t.prototype.run=function(){this.isWorking=!0,this.nextSceneName=""},t.prototype.stop=function(t,e){void 0===e&&(e=null),""==this.nextSceneName&&(this.nextSceneName=t,null!=e?(this.endTimer.setUpdateTime=e,this.endTimer.run()):this.isWorking=!1)},t.prototype.init=function(){},t.prototype.update=function(t){this.endTimer.update(t)},t.prototype.render=function(t){},t.prototype.drawBackground=function(t){this.screen.drawImage(t,0,0,this.screen.getWidth,this.screen.getHeight)},t}(),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.update=function(t){this.listener.getMouseIsUp&&location.reload()},e.prototype.render=function(t){this.screen.setColor="black",this.screen.print("empty scene, click for reload app",this.screen.getWidth/2,this.screen.getHeight/2-20,40,"center")},e}(s),u=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.init=function(){},e.prototype.update=function(t){this.screen.getIsDataPlayerLoaded&&"error"!=this.screen.getIsDataPlayerLoaded&&this.stop("menu")},e.prototype.render=function(t){this.screen.setColor="black",this.screen.fill(0,0,this.screen.getWidth,this.screen.getHeight),this.screen.setColor="white",this.screen.getIsImageListLoaded?"error"==this.screen.getIsDataPlayerLoaded?this.screen.print(this.language.getText("data load error"),this.screen.getWidth/2,this.screen.getHeight/2-20,32,"center"):this.screen.getIsDataPlayerLoaded||this.screen.print(this.language.getText("loading data"),this.screen.getWidth/2,this.screen.getHeight/2-20,32,"center"):this.screen.print(this.language.getText("loading resources"),this.screen.getWidth/2,this.screen.getHeight/2-20,32,"center")},e}(s),h=function(){function t(t,e,n,i,o){void 0===i&&(i="linear"),void 0===o&&(o=1),this.fromValue=t,this.toValue=e,this.duration=n,this.type=i,this.typeValue=o,this.isWorking=!1,this.percent=0,this.lastTime=0,this.currentValue=this.fromValue}return Object.defineProperty(t.prototype,"getIsWorking",{get:function(){return this.isWorking},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getFromValue",{get:function(){return this.fromValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getToValue",{get:function(){return this.toValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getCurrentValue",{get:function(){return this.currentValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getType",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getTypeValue",{get:function(){return this.typeValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getDuration",{get:function(){return this.duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setType",{set:function(t){this.type=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setTypeValue",{set:function(t){this.typeValue=t},enumerable:!1,configurable:!0}),t.prototype.run=function(){this.isWorking=!0,this.lastTime=0},t.prototype.stop=function(){this.isWorking=!1},t.prototype.reset=function(){this.currentValue=this.fromValue},t.prototype.update=function(t){this.isWorking&&(0==this.lastTime&&(this.lastTime=t),t-this.lastTime>=this.duration?(this.stop(),this.percent=this.getPercent(1)):this.percent=this.getPercent((t-this.lastTime)/this.duration),this.currentValue=this.fromValue+this.percent*this.toValue)},t.prototype.getPercent=function(t){switch(this.type){case"linear":return t;case"pow":return Math.pow(t,this.typeValue);case"unpow":return 1-Math.pow(1-t,this.typeValue);case"linear-reverse":return 1-t}},t}(),p=function(){function t(t,e){var n=this;this.frames=t,this.duration=e,this.currentFrame=0,this.timer=new o(this.duration,!0,(function(){return n.updateCurrentFrame()}))}return Object.defineProperty(t.prototype,"getIsWorking",{get:function(){return this.timer.getIsWorking},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getDuration",{get:function(){return this.duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getCurrentFrame",{get:function(){return this.frames[this.currentFrame]},enumerable:!1,configurable:!0}),t.prototype.run=function(){this.timer.run()},t.prototype.stop=function(){this.timer.stop()},t.prototype.update=function(t){this.timer.update(t)},t.prototype.updateCurrentFrame=function(){this.currentFrame>=this.frames.length-1?this.currentFrame=0:this.currentFrame+=1},t}();function l(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function g(t){return Array.from(Array(t).keys())}var d=function(){function t(t,e,n,i,o,r,s){this.widgetContext=t,this.callback=e,this.imageName=n,this.x=i,this.y=o,this.width=r,this.height=s,this.isDisable=!1}return Object.defineProperty(t.prototype,"getX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getWidth",{get:function(){return this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getHeight",{get:function(){return this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getImageName",{get:function(){return this.imageName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getIsDisable",{get:function(){return this.isDisable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setX",{set:function(t){this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setY",{set:function(t){this.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setWidth",{set:function(t){this.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setHeight",{set:function(t){this.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setImageName",{set:function(t){this.imageName=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setIsDisable",{set:function(t){this.isDisable=t},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.isDisable||this.widgetContext.getListener.mouseUpHandler(this.x,this.y,this.width,this.height)&&this.callback()},t.prototype.render=function(){null==this.imageName||this.isDisable||this.widgetContext.getScreen.drawImage(this.imageName,this.x,this.y,this.width,this.height)},t}(),f=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shopButton=new d(e.widgetContext,(function(){return e.stop("shop")}),"shop-button",8,e.screen.getHeight-160,64,64),e.settingsButton=new d(e.widgetContext,(function(){return e.stop("settings")}),"settings-button",e.screen.getWidth-32,0,32,32),e.leaderboardButton=new d(e.widgetContext,(function(){return e.stop("leaderboard")}),"leaderboard-button",e.screen.getWidth-64,0,32,32),e.buttonsAnimation=new h(0,-32,250),e.hudAnimation=new h(0,32,250),e.shopButtonAnimation=new h(8,-72,250),e.clickAnimation=new h(1,-1,250),e}return f(e,t),e.prototype.init=function(){this.buttonsAnimation.reset(),this.hudAnimation.reset(),this.shopButtonAnimation.reset(),this.clickAnimation.reset()},e.prototype.update=function(e){t.prototype.update.call(this,e),this.shopButton.update(),this.settingsButton.update(),this.leaderboardButton.update(),this.listener.getMouseIsUp&&""==this.getNextSceneName&&(this.buttonsAnimation.getIsWorking||(this.buttonsAnimation.run(),this.hudAnimation.run(),this.shopButtonAnimation.run(),this.clickAnimation.run(),this.stop("level",250)))},e.prototype.render=function(t){var e=this;this.buttonsAnimation.update(t),this.hudAnimation.update(t),this.shopButtonAnimation.update(t),this.clickAnimation.update(t),this.drawBackground("background"),this.screen.drawImage("box",this.screen.getWidth/2-36,this.screen.getHeight-92-48,72,72),g(3).forEach((function(t){return e.screen.drawImage("heart",32*t,-32+e.hudAnimation.getCurrentValue,32,32)})),this.screen.setColor="white",this.screen.drawImage("trophy",0,this.hudAnimation.getCurrentValue,32,32),this.screen.print(this.storage.highscore.toString(),32,this.hudAnimation.getCurrentValue,32),this.screen.drawImage("money",0,26+this.hudAnimation.getCurrentValue,32,32),this.screen.print(this.storage.money.toString(),32,26+this.hudAnimation.getCurrentValue,32),this.shopButton.setX=this.shopButtonAnimation.getCurrentValue,this.settingsButton.setY=this.buttonsAnimation.getCurrentValue,this.leaderboardButton.setY=this.buttonsAnimation.getCurrentValue,this.shopButton.render(),this.settingsButton.render(),this.leaderboardButton.render(),this.screen.setColor="white",this.screen.setAlpha=this.clickAnimation.getCurrentValue,this.screen.print(this.language.getText("click"),this.screen.getWidth/2,this.screen.getHeight/2-56,40,"center")},e}(s),y=function(){function t(){this.x=0,this.y=0}return Object.defineProperty(t.prototype,"getX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getY",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e){switch(t){case"down":this.y+=e;break;case"left":this.x-=e;break;case"up":this.y-=e;break;case"right":this.x+=e}},t.prototype.update=function(){this.x=0,this.y=0},t}(),b=function(){function t(t,e,n,i,o){this.x=t,this.y=e,this.width=n,this.height=i,this.speed=o,this.velocity=new y,this.lastTime=0}return Object.defineProperty(t,"setScreen",{set:function(e){t.screen=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getWidth",{get:function(){return this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getHeight",{get:function(){return this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSpeed",{get:function(){return this.speed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setX",{set:function(t){this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setY",{set:function(t){this.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setWidth",{set:function(t){this.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setHeight",{set:function(t){this.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setSpeed",{set:function(t){this.speed=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setLastTime",{set:function(t){this.lastTime=t},enumerable:!1,configurable:!0}),t.prototype.move=function(t){this.velocity.set(t,this.speed)},t.prototype.detect=function(t){return this.x+this.width>=t.getX&&this.x<=t.getX+t.getWidth&&this.y+this.height>=t.getY&&this.y<=t.getY+t.getHeight},t.prototype.update=function(t){0==this.lastTime&&(this.lastTime=t),this.x+=this.velocity.getX*((t-this.lastTime)/1e3),this.y+=this.velocity.getY*((t-this.lastTime)/1e3),this.velocity.update(),this.lastTime=t},t.prototype.render=function(){},t}(),z=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),w=function(t){function e(e){var n=t.call(this,0,0,72,24,240)||this;return n.listener=e,n.health=3,n.isFrozen=!1,n.isHasX=!1,n.isHasShield=!1,n.timerOfFreeze=new o(3e3,!1,(function(){return n.unfreeze()})),n.timerOfX=new o(15e3,!1,(function(){return n.unX()})),n.iconList={ice:{animation:new h(0,56,500,"unpow",5),timer:n.timerOfFreeze},x:{animation:new h(0,56,500,"unpow",5),timer:n.timerOfX}},n.activeIconList=new Set,n}return z(e,t),Object.defineProperty(e.prototype,"getHealth",{get:function(){return this.health},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getIsFrozen",{get:function(){return this.isFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getIsHasX",{get:function(){return this.isHasX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getIsHasShield",{get:function(){return this.isHasShield},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setHealth",{set:function(t){this.health=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setIsHasX",{set:function(t){this.isHasX=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setIsHasShield",{set:function(t){this.isHasShield=t},enumerable:!1,configurable:!0}),e.prototype.clearIconList=function(){this.activeIconList=new Set},e.prototype.freeze=function(){this.isFrozen=!0,this.speed=100,this.addIcon("ice"),this.timerOfFreeze.run()},e.prototype.unfreeze=function(){this.isFrozen=!1,this.speed=240,this.removeIcon("ice")},e.prototype.onX=function(){this.isHasX=!0,this.addIcon("x"),this.timerOfX.run()},e.prototype.unX=function(){this.isHasX=!1,this.removeIcon("x")},e.prototype.update=function(e){t.prototype.update.call(this,e),(this.listener.keyPressHandler("arrowleft")||this.listener.touchPressHandler(0,0,this.listener.getWidth/2,this.listener.getHeight))&&this.move("left"),(this.listener.keyPressHandler("arrowright")||this.listener.touchPressHandler(this.listener.getWidth/2,32,this.listener.getWidth/2,this.listener.getHeight))&&this.move("right"),this.timerOfFreeze.update(e),this.timerOfX.update(e)},e.prototype.render=function(){e.screen.drawImage("box",this.x,this.y-48,72,72),this.isFrozen&&e.screen.drawImage("ice-box",this.x,this.y-48,72,72)},e.prototype.renderIconList=function(t){var n=this,i=0;this.activeIconList.forEach((function(o){n.iconList[o].animation.update(t),e.screen.drawImage("".concat(o,"-icon"),n.iconList[o].animation.getCurrentValue-56,96+48*Number(i)+4*Number(i),56,48),e.screen.setColor="white",e.screen.drawSprite("icon-line",0,0,13-100*n.iconList[o].timer.getDeltaTime/n.iconList[o].timer.getUpdateTime/100*13,1,n.iconList[o].animation.getCurrentValue-56,96+48*i+4*i+40,52-100*n.iconList[o].timer.getDeltaTime/n.iconList[o].timer.getUpdateTime/100*52,4),i+=1}))},e.prototype.addIcon=function(t){this.activeIconList.has(t)||(this.activeIconList.add(t),this.iconList[t].animation.run())},e.prototype.removeIcon=function(t){this.activeIconList.delete(t)},e}(b),x=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),P=function(t){function e(e,n,i){var o=t.call(this,n,i,64,64,300)||this;return o.name=e,o}return x(e,t),Object.defineProperty(e.prototype,"getName",{get:function(){return this.name},enumerable:!1,configurable:!0}),e.prototype.update=function(e){t.prototype.update.call(this,e),this.move("down")},e.prototype.render=function(){e.screen.drawImage(this.name,this.x,this.y,this.width,this.height)},e}(b),L=function(){function t(t,e){var n=this;this.storage=t,this.config=e,this.timer=new o(2e3,!0,(function(){return n.updateTimer()})),this.lootList=[]}return Object.defineProperty(t.prototype,"getLootList",{get:function(){return this.lootList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getUpdateTime",{get:function(){return this.timer.getUpdateTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getIsWorking",{get:function(){return this.timer.getIsWorking},enumerable:!1,configurable:!0}),t.prototype.deleteLootByIndex=function(t){this.lootList.splice(t,1)},t.prototype.run=function(){this.lootList=[],this.timer.setUpdateTime=2e3,this.timer.run()},t.prototype.stop=function(){this.timer.stop()},t.prototype.update=function(t){this.timer.update(t)},t.prototype.spawn=function(t,e,n){this.lootList.push(new P(t,e,n))},t.prototype.updateTimer=function(){this.timer.getUpdateTime>400&&(this.timer.setUpdateTime=this.timer.getUpdateTime-20);var t,e=l(1,1e3);switch(!0){case e<=700:t=this.getPizzaName(this.config.pizzaList,!1);break;case e>700&&e<=900:t="rotten-pizza";break;case e>900&&e<=960:t="ice";break;case e>960&&e<=980:t="x";break;case e>980&&e<=990:t="big-money";break;case e>990&&e<=999:t="totem";break;case 1e3==e:var n=this.getPizzaName(this.config.crystalPizzaList,!0);t=null==n?"totem":n;break;default:t="pepperoni-pizza"}this.spawn(t,l(0,192),-64)},t.prototype.getPizzaName=function(t,e){var n,i=[];for(n in t)this.storage.pizzaList[n]?e||i.push(n):e&&i.push(n);return 0!=i.length?"".concat(i[l(0,i.length-1)],"-pizza"):null},t}();function O(t,e,n){return new Promise((function(i,o){var r=new XMLHttpRequest;r.open(e,t,!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(n)),r.addEventListener("load",(function(){200==r.status?i(JSON.parse(r.response)):o()})),r.addEventListener("error",(function(){return o()}))}))}var S=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=new w(e.listener),e.lootSpawner=new L(e.storage,e.config),e.pauseButton=new d(e.widgetContext,(function(){return e.pause()}),"pause-button",e.screen.getWidth-32,0,32,32),e.continueButton=new d(e.widgetContext,(function(){return e.unpause()}),"continue-button",e.screen.getWidth/2-64-8,e.screen.getHeight/2-32,64,64),e.homeButton=new d(e.widgetContext,(function(){return e.exit()}),"home-button",e.screen.getWidth/2+8,e.continueButton.getY,64,64),e.score=0,e.scoreTimer=new o(10,!0,(function(){return e.score+=1})),e.smellAnimation=new p([0,1,2],150),e.bigMoneyAnimation=new p([0,1,2,3,4,5,6,7],100),e.pauseButtonAnimation=new h(-32,32,250),e}return S(e,t),e.prototype.init=function(){this.pauseButton.setIsDisable=!1,this.continueButton.setIsDisable=!0,this.homeButton.setIsDisable=!0,this.player.setX=this.screen.getWidth/2-this.player.getWidth/2,this.player.setY=this.screen.getHeight-92,this.player.setLastTime=0,this.player.setHealth=3,this.player.setIsHasX=!1,this.player.setIsHasShield=!1,this.player.unfreeze(),this.player.clearIconList(),this.lootSpawner.run(),this.score=0,this.scoreTimer.run(),this.smellAnimation.run(),this.bigMoneyAnimation.run(),this.pauseButtonAnimation.run(),this.isPause=!1,this.bufferTime=0,this.lastTime=0},e.prototype.update=function(t){this.pauseButton.update(),this.continueButton.update(),this.homeButton.update(),this.isPause?(0==this.lastTime&&(this.lastTime=t),this.bufferTime+=t-this.lastTime,this.lastTime=t):(this.listener.keyPressHandler("space")&&this.pause(),this.updatePlayer(t-this.bufferTime),this.updateLootList(t-this.bufferTime),this.lootSpawner.update(t-this.bufferTime),this.scoreTimer.update(t-this.bufferTime))},e.prototype.render=function(t){var e=this;this.smellAnimation.update(t),this.bigMoneyAnimation.update(t),this.pauseButtonAnimation.update(t),this.drawBackground("background"),this.player.render(),this.lootSpawner.getLootList.forEach((function(t){t.render(),"rotten-pizza"==t.getName?e.screen.drawSprite("smell-animation",16*e.smellAnimation.getCurrentFrame,0,16,32,t.getX,t.getY-48,64,128):"big-money"==t.getName&&e.screen.drawSprite("big-money-animation",16*e.bigMoneyAnimation.getCurrentFrame,0,16,16,t.getX,t.getY,64,64)})),g(3).forEach((function(t){return e.screen.drawImage("dead-heart",32*t,0,32,32)})),g(this.player.getHealth).forEach((function(t){return e.screen.drawImage("".concat(e.player.getIsHasShield?"gold-heart":"heart"),32*t,0,32,32)})),this.screen.setColor="white",this.screen.drawImage("trophy",0,32,32,32),this.storage.highscore>this.score?this.screen.print("".concat(this.screen.getShortScore(this.storage.highscore)," / ").concat(this.screen.getShortScore(this.score)),32,32,32):this.screen.print("".concat(this.screen.getShortScore(this.score)),32,32,32),this.screen.drawImage("money",0,58,32,32),this.screen.print(this.storage.money.toString(),32,58,32),this.player.renderIconList(t),this.pauseButton.setY=this.pauseButtonAnimation.getCurrentValue,this.pauseButton.render(),this.continueButton.render(),this.homeButton.render()},e.prototype.pause=function(){this.isPause=!0,this.pauseButton.setIsDisable=!0,this.continueButton.setIsDisable=!1,this.homeButton.setIsDisable=!1},e.prototype.unpause=function(){this.isPause=!1,this.lastTime=0,this.pauseButton.setIsDisable=!1,this.continueButton.setIsDisable=!0,this.homeButton.setIsDisable=!0},e.prototype.exit=function(){this.storage.highscore<this.score&&(this.storage.highscore=this.score),O("/api/updateplayer","POST",{money:this.storage.money,highscore:this.storage.highscore}).then((function(){return console.log("Player data updated - OK")})).catch((function(){return console.log("Player data updated - ERROR")})),this.stop("menu")},e.prototype.updatePlayer=function(t){this.player.update(t),this.player.getHealth<=0&&this.exit(),this.player.getX<=0?this.player.setX=0:this.player.getX+this.player.getWidth>=this.screen.getWidth&&(this.player.setX=this.screen.getWidth-this.player.getWidth)},e.prototype.updateLootList=function(t){var e=this;this.lootSpawner.getLootList.forEach((function(n,i){if(e.player.detect(n)){switch(n.getName){case"rotten-pizza":e.player.getIsFrozen&&e.player.unfreeze(),e.player.getIsHasShield?e.player.setIsHasShield=!1:e.player.setHealth=e.player.getHealth-1;break;case"ice":e.player.freeze();break;case"x":e.player.onX();break;case"big-money":e.storage.money+=[10,20,30][l(0,2)];break;case"totem":e.player.getIsHasShield&&(e.storage.money+=3),e.player.setIsHasShield=!0;break;default:null!=e.config.crystalPizzaList[n.getName.split("-")[0]]&&(e.storage.pizzaList[n.getName.split("-")[0]]=!0,e.storage.money+=10,O("/api/buypizza","POST",{pizzaName:n.getName.split("-")[0]}).then((function(){return console.log("Crystal pizza ".concat(n.getName.split("-")[0]," unlocked"))})).catch((function(){return console.log("Crystal pizza ".concat(n.getName.split("-")[0]," did not unlock"))}))),e.player.getIsHasX?e.storage.money+=2:e.storage.money+=1}e.lootSpawner.deleteLootByIndex(i)}else n.getY>=e.screen.getHeight&&e.lootSpawner.deleteLootByIndex(i);n.update(t)}))},e}(s),I=function(){function t(){this.imageList={}}return Object.defineProperty(t.prototype,"getImageList",{get:function(){return this.imageList},enumerable:!1,configurable:!0}),t.prototype.loadList=function(t,e,n){var i,o=[];for(i in n)o.push(this.loadImage(i,"".concat(t,"/").concat(n[i],".").concat(e)));return Promise.allSettled(o)},t.prototype.loadImage=function(t,e){var n=this;return new Promise((function(i,o){var r=new Image;r.src=e,r.addEventListener("load",(function(e){return i(t)})),r.addEventListener("error",(function(e){return o(t)})),n.imageList[t]=r}))},t}(),j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeButton=new d(e.widgetContext,(function(){return e.stop("menu")}),"home-button",e.screen.getWidth/2-32,e.screen.getHeight/2-64-4,64,64),e.languageButton=new d(e.widgetContext,(function(){return e.stop("language-room")}),"language-button",e.homeButton.getX-64-8,e.homeButton.getY,64,64),e.fullscreenButton=new d(e.widgetContext,(function(){return e.fullscreen()}),"fullscreen-on-button",e.homeButton.getX+64+8,e.homeButton.getY,64,64),e.telegramButton=new d(e.widgetContext,(function(){return window.open("https://t.me/addstickers/pizzagame")}),"telegram-button",e.homeButton.getX,e.homeButton.getY+64+8,64,64),e.exitButton=new d(e.widgetContext,(function(){return e.exit()}),"exit-button",e.homeButton.getX-64-8,e.telegramButton.getY,64,64),e.aboutButton=new d(e.widgetContext,(function(){return e.stop("about")}),"about-button",e.telegramButton.getX+64+8,e.telegramButton.getY,64,64),e.secretButton=new d(e.widgetContext,(function(){return e.secret()}),"octo",e.screen.getWidth-32,0,32,32),e.isSecret=Boolean(localStorage.getItem("secret")),e}return j(e,t),e.prototype.init=function(){var t=this;document.addEventListener("fullscreenchange",(function(e){document.fullscreenElement?t.fullscreenButton.setImageName="fullscreen-off-button":t.fullscreenButton.setImageName="fullscreen-on-button"}))},e.prototype.update=function(t){this.languageButton.update(),this.homeButton.update(),this.exitButton.update(),this.fullscreenButton.update(),this.telegramButton.update(),this.aboutButton.update(),this.secretButton.update()},e.prototype.render=function(t){this.drawBackground("background-2"),this.languageButton.render(),this.homeButton.render(),this.exitButton.render(),this.fullscreenButton.render(),this.telegramButton.render(),this.aboutButton.render()},e.prototype.exit=function(){O("/api/logout","GET",null).finally((function(){return location.reload()}))},e.prototype.fullscreen=function(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},e.prototype.secret=function(){this.isSecret=!0,localStorage.setItem("secret","true"),this.stop("secret-room")},e}(s),k=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.init=function(){var t=this;this.buttons=[],this.language.getLanguageList.forEach((function(e,n){t.buttons.push(new d(t.widgetContext,(function(){return t.changeLanguage(e)}),"".concat(e,"-flag"),t.screen.getWidth/2-32-8-64+64*n+8*n,t.screen.getHeight/2-32,64,64))}))},e.prototype.update=function(t){this.buttons.forEach((function(t){return t.update()}))},e.prototype.render=function(t){this.drawBackground("background-2"),this.buttons.forEach((function(t){return t.render()}))},e.prototype.changeLanguage=function(t){this.language.setLanguage=t,localStorage.setItem("language",this.language.getCurrentLanguage),this.stop("settings")},e}(s),B=function(){function t(t){var e;this.languageListJSON=t,this.currentLanguage=null!==(e=localStorage.getItem("language"))&&void 0!==e?e:"english",this.languageList=["english","russia","spain"]}return Object.defineProperty(t.prototype,"getCurrentLanguage",{get:function(){return this.currentLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getLanguageList",{get:function(){return this.languageList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setLanguage",{set:function(t){this.currentLanguage=t},enumerable:!1,configurable:!0}),t.prototype.getText=function(t){return null==this.languageListJSON[t][this.currentLanguage]?this.languageListJSON[t].english:this.languageListJSON[t][this.currentLanguage]},t}(),H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_=function(t){function e(n,i,o){var r=t.call(this,o,e.screen.getHeight-160,64,64,0)||this;return r.name=n,r.isLock=i,r}return H(e,t),Object.defineProperty(e.prototype,"getName",{get:function(){return this.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getIsLock",{get:function(){return this.isLock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setIsDisable",{set:function(t){this.isLock=t},enumerable:!1,configurable:!0}),e.prototype.render=function(){e.screen.drawImage("".concat(this.name,"-pizza"),this.x,this.y,this.width,this.height),this.isLock&&e.screen.drawImage("lock-pizza",this.x,this.y,this.width,this.height)},e}(b),W=function(){function t(t,e,n,i,o){this.widgetContext=t,this.text=e,this.x=n,this.y=i,this.fontSize=o,this.lines=[],this.lines[0]=this.text}return Object.defineProperty(t.prototype,"getText",{get:function(){return this.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getFontSize",{get:function(){return this.fontSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setX",{set:function(t){this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setY",{set:function(t){this.y=t},enumerable:!1,configurable:!0}),t.prototype.setColumnWidth=function(t){var e=this,n="",i=this.text.split(" ");return this.lines=[],i.forEach((function(i){e.widgetContext.getScreen.getTextWidth(n+i,e.fontSize)>=t?(e.lines.push(n),n=i+" "):n+=i+" "})),this.lines.push(n),this},t.prototype.render=function(){var t=this;this.lines.forEach((function(e,n){return t.widgetContext.getScreen.print(e,t.x,t.y+n*t.fontSize*.7,t.fontSize)}))},t}(),N=function(){function t(t,e,n,i){var o=this;this.widgetContext=t,this.json=e,this.storage=n,this.language=i,this.leftButton=new d(this.widgetContext,(function(){return o.left()}),"left-button",0,this.widgetContext.getScreen.getHeight-160,24,64),this.rightButton=new d(this.widgetContext,(function(){return o.right()}),"right-button",this.widgetContext.getScreen.getWidth-24,this.widgetContext.getScreen.getHeight-160,24,64)}return Object.defineProperty(t.prototype,"getRowsCount",{get:function(){return this.rowsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getCurrentRow",{get:function(){return this.currentRow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getCurrentPizzaIndex",{get:function(){return this.currentPizzaIndex},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.leftButton.setIsDisable=!0,this.rightButton.setIsDisable=!1,this.rowsCount=0,this.currentRow=0,this.currentPizzaIndex=0,this.pizzaList=[],this.pizzaNameList=[],this.pizzaDescriptionList=[];var t,e=0;for(t in this.json)e>=3&&(e=0,this.rowsCount+=1),this.pizzaList.push(new _(t,0==this.storage.pizzaList[t],28+this.rowsCount*this.widgetContext.getScreen.getWidth+64*e+4*e)),this.pizzaDescriptionList.push(new W(this.widgetContext,this.json[t].description[this.language.getCurrentLanguage],96,192,30).setColumnWidth(this.widgetContext.getScreen.getWidth/2+32)),this.pizzaNameList.push(new W(this.widgetContext,this.json[t].name[this.language.getCurrentLanguage],96,160,40)),e+=1},t.prototype.update=function(){var t=this;this.leftButton.update(),this.rightButton.update(),this.pizzaList.forEach((function(e,n){t.widgetContext.getListener.mouseUpHandler(e.getX,e.getY,e.getWidth,e.getHeight)&&(t.currentPizzaIndex=n)})),this.widgetContext.getListener.mouseUpHandler(96,this.widgetContext.getScreen.getHeight-200,32+this.widgetContext.getScreen.getTextWidth(this.json[this.pizzaList[this.currentPizzaIndex].getName].cost.toString(),32),32)&&"not sold"!=this.json[this.pizzaList[this.currentPizzaIndex].getName].cost&&!this.storage.pizzaList[this.pizzaList[this.currentPizzaIndex].getName]&&this.storage.money>=this.json[this.pizzaList[this.currentPizzaIndex].getName].cost&&this.buy(this.pizzaList[this.currentPizzaIndex].getName,this.currentPizzaIndex)},t.prototype.render=function(){this.pizzaList.forEach((function(t){return t.render()})),this.widgetContext.getScreen.setColor="white",this.widgetContext.getScreen.drawImage("".concat(this.pizzaList[this.currentPizzaIndex].getName,"-pizza"),16,192,64,64),this.pizzaNameList[this.currentPizzaIndex].render(),this.pizzaDescriptionList[this.currentPizzaIndex].render(),"not sold"==this.json[this.pizzaList[this.currentPizzaIndex].getName].cost||this.storage.pizzaList[this.pizzaList[this.currentPizzaIndex].getName]||(this.widgetContext.getScreen.setColor="white",this.widgetContext.getScreen.drawImage("money",96,this.widgetContext.getScreen.getHeight-200,32,32),this.widgetContext.getScreen.print(this.json[this.pizzaList[this.currentPizzaIndex].getName].cost.toString(),128,this.widgetContext.getScreen.getHeight-200,32)),this.leftButton.render(),this.rightButton.render()},t.prototype.left=function(){var t=this;this.currentRow-=1,this.pizzaList.forEach((function(e){return e.setX=e.getX+t.widgetContext.getScreen.getWidth})),this.rightButton.setIsDisable=!1,this.currentRow<=0&&(this.leftButton.setIsDisable=!0)},t.prototype.right=function(){var t=this;this.currentRow+=1,this.pizzaList.forEach((function(e){return e.setX=e.getX-t.widgetContext.getScreen.getWidth})),this.leftButton.setIsDisable=!1,this.currentRow>=this.rowsCount&&(this.rightButton.setIsDisable=!0)},t.prototype.buy=function(t,e){var n=this;O("/api/buypizza","POST",{pizzaName:t}).then((function(i){"ok"==i.status?(n.storage.pizzaList[t]=!0,n.storage.money-=Number(n.json[n.pizzaList[e].getName].cost),n.pizzaList[e].setIsDisable=!1,console.log("Pizza ".concat(t," unlocked"))):console.log("Pizza ".concat(t," did not unlock"))})).catch((function(){return console.log("Pizza ".concat(t," error"))}))},t}(),A=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pizzaSlider=new N(e.widgetContext,e.config.pizzaList,e.storage,e.language),e.crystalPizzaSlider=new N(e.widgetContext,e.config.crystalPizzaList,e.storage,e.language),e.homeButton=new d(e.widgetContext,(function(){return e.stop("menu")}),"home-icon",e.screen.getWidth-56,64,56,48),e.changeSliderButton=new d(e.widgetContext,(function(){return e.change()}),"crystal-room-icon",0,64,56,48),e}return A(e,t),e.prototype.init=function(){this.pizzaSlider.init(),this.crystalPizzaSlider.init(),this.currentSlider=this.pizzaSlider},e.prototype.update=function(t){this.homeButton.update(),this.changeSliderButton.update(),this.currentSlider.update()},e.prototype.render=function(t){this.drawBackground("background-2"),this.currentSlider.render(),this.screen.setColor="white",this.screen.drawImage("money",0,0,32,32),this.screen.print(this.storage.money.toString(),32,0,32),this.homeButton.render(),this.changeSliderButton.render()},e.prototype.change=function(){this.currentSlider==this.pizzaSlider?(this.currentSlider=this.crystalPizzaSlider,this.changeSliderButton.setImageName="back-icon"):(this.currentSlider=this.pizzaSlider,this.changeSliderButton.setImageName="crystal-room-icon")},e}(s),D=function(){function t(t,e){this.screen=t,this.listener=e}return Object.defineProperty(t.prototype,"getScreen",{get:function(){return this.screen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getListener",{get:function(){return this.listener},enumerable:!1,configurable:!0}),t}(),X=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.players=[],e.homeButton=new d(e.widgetContext,(function(){return e.stop("menu")}),"home-icon",e.screen.getWidth-56,e.screen.getHeight-160,56,48),e}return X(e,t),e.prototype.init=function(){var t=this;O("api/getplayers","POST",{count:10}).then((function(e){t.players=e,console.log("Players data loaded - OK")})).catch((function(){return console.log("Players data loaded - ERROR")}))},e.prototype.update=function(t){this.homeButton.update()},e.prototype.render=function(t){var e=this;this.drawBackground("background-2"),this.screen.drawImage("leaderboard-background",20,24,216,320),this.screen.setColor="white",this.players.forEach((function(t,n){e.screen.print(t.name,52,24+24*n+8*n,24),e.screen.print(e.screen.getShortScore(t.highscore),e.screen.getWidth-24-28,24+24*n+8*n,24,"right")})),this.homeButton.render()},e}(s),F=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spiceAnimation=new p([0,1,2],150),e}return F(e,t),e.prototype.init=function(){this.spiceAnimation.run()},e.prototype.update=function(t){this.listener.getMouseIsUp&&this.stop("settings")},e.prototype.render=function(t){this.spiceAnimation.update(t),this.drawBackground("background-3"),this.screen.drawImage("shop-icon",0,0,56,48),this.screen.drawImage("language-icon",0,64,64,64),this.screen.drawImage("casino-icon",0,128,64,64),this.screen.drawImage("checkbox-button",0,192,48,48),this.screen.drawImage("checkbox-fill-button",0,232,48,48),this.screen.drawImage("spice-box",this.screen.getWidth/2-72-4,this.screen.getHeight-92-48,72,72),this.screen.drawImage("rotten-box",this.screen.getWidth/2+4,this.screen.getHeight-92-48,72,72),this.screen.drawSprite("spice-animation",16*this.spiceAnimation.getCurrentFrame,0,16,32,this.screen.getWidth/2-72-4+4,this.screen.getHeight-92-48-24,64,128),this.screen.drawImage("cola",this.screen.getWidth/2-64-4,this.screen.getHeight/2-64-4,64,64),this.screen.drawImage("old-carbonara-pizza",this.screen.getWidth/2+4,this.screen.getHeight/2-64-4,64,64),this.screen.drawImage("casino-pizza",this.screen.getWidth/2-64-4,this.screen.getHeight/2+4,64,64),this.screen.drawImage("money-bag",this.screen.getWidth/2+4,this.screen.getHeight/2+4,64,64),this.screen.drawImage("youtube-button",this.screen.getWidth/2-32,4,64,64)},e}(s),Y=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeButton=new d(e.widgetContext,(function(){return e.stop("settings")}),"home-icon",e.screen.getWidth-56,e.screen.getHeight-160,56,48),e.gitHubButton=new d(e.widgetContext,(function(){return window.open("https://github.com/forspecialpizzagame/pizzagame")}),"github-button",e.screen.getWidth/2-32,70,64,64),e}return Y(e,t),e.prototype.init=function(){},e.prototype.update=function(t){this.gitHubButton.update(),this.homeButton.update()},e.prototype.render=function(t){this.drawBackground("background-2"),this.screen.setColor="white",this.screen.print(this.language.getText("developer"),this.screen.getWidth/2,8,32,"center"),this.screen.print("NEkTARIN",this.screen.getWidth/2,36,24,"center"),this.gitHubButton.render(),this.screen.print(this.language.getText("testers"),this.screen.getWidth/2,160,32,"center"),this.screen.print("F1stashka",this.screen.getWidth/2,190,24,"center"),this.screen.print("SATANik",this.screen.getWidth/2,210,24,"center"),this.screen.print("Tima",this.screen.getWidth/2,230,24,"center"),this.screen.print("fomousey",this.screen.getWidth/2,250,24,"center"),this.screen.print("danik",this.screen.getWidth/2,270,24,"center"),this.screen.print("Tim4ek78",this.screen.getWidth/2,290,24,"center"),this.homeButton.render()},e}(s),M=function(){function t(){var t=this;this.version="1.7.1",this.imageListJSON=n(331),this.languageListJSON=n(113),this.screen=new e(256,512),this.listener=new i(256,512),this.widgetContext=new D(this.screen,this.listener),this.language=new B(this.languageListJSON),this.storage={money:0,highscore:0,pizzaList:{pepperoni:!0,farmhouse:!1,margaret:!1,cheese:!1,spice:!1,tuscany:!1,carbonara:!1,belarusian:!1,hawaiian:!1,mexican:!1,pumpkin:!1,italian:!1,gold:!1,bavarian:!1,chicken:!1,diamond:!1,ruby:!1,emerald:!1,amethyst:!1,jade:!1,topaz:!1,amber:!1}},this.config={pizzaList:n(293),crystalPizzaList:n(706)},this.sceneList={loading:new c(this),menu:new m(this),level:new v(this),settings:new C(this),"language-room":new T(this),leaderboard:new V(this),shop:new E(this),about:new U(this),"secret-room":new R(this)},this.currentScene=this.sceneList.loading,this.framesPerSecond=0,this.frames=0,this.isShowFramesPerSecond=!0,this.frameTimer=new o(1e3,!0,(function(){return t.clearFrameData()})),b.setScreen=this.screen;var r=new I;r.loadList(this.imageListJSON.root,this.imageListJSON.extension,this.imageListJSON.list).then((function(e){console.groupCollapsed("IMAGE LIST"),e.forEach((function(t){"fulfilled"==t.status?console.log("".concat(t.value," - OK")):"rejected"==t.status&&console.log("".concat(t.reason," - ERROR"))})),console.groupEnd(),t.screen.setImageList=r.getImageList,t.screen.setIsImageListLoaded=!0,O("/api/getplayer","GET",null).then((function(e){console.log("Player data loaded - OK"),t.storage.money=e[0].money,t.storage.highscore=e[0].highscore,t.storage.pizzaList=e[0].pizzaList,t.screen.setIsPlayerDataLoaded=!0,t.sceneList.leaderboard.init()})).catch((function(){console.log("Player data loaded - ERROR"),t.screen.setIsPlayerDataLoaded="error"}))}))}return Object.defineProperty(t.prototype,"getScreen",{get:function(){return this.screen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getListener",{get:function(){return this.listener},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getWidgetContext",{get:function(){return this.widgetContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getLanguage",{get:function(){return this.language},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getStorage",{get:function(){return this.storage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getConfig",{get:function(){return this.config},enumerable:!1,configurable:!0}),t.prototype.run=function(){console.log("Game Version ".concat(this.version," is running...")),this.currentScene.init(),this.currentScene.run(),this.frameTimer.run(),this.frame(0)},t.prototype.frame=function(t){var e=this;window.requestAnimationFrame((function(t){return e.frame(t)})),this.frames+=1,this.currentScene.getIsWorking||(null==this.sceneList[this.currentScene.getNextSceneName]?this.currentScene=new a(this):this.currentScene=this.sceneList[this.currentScene.getNextSceneName],this.currentScene.init(),this.currentScene.run()),this.currentScene.update(t),this.screen.clear(),this.currentScene.render(t),this.frameTimer.update(t),this.listener.update()},t.prototype.clearFrameData=function(){this.framesPerSecond=this.frames-1,this.frames=0,this.isShowFramesPerSecond&&console.log("FPS: ".concat(this.framesPerSecond))},t}();window.addEventListener("load",(function(t){return(new M).run()}))})()})();